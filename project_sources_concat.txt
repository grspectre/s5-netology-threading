================================================================================
FILE: pom.xml
================================================================================

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.5.7</version>
        <relativePath/>
    </parent>

    <groupId>com.shanaurin.jobparser</groupId>
    <artifactId>vacancy-parser</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>Vacancy parser</name>
    <description>Vacancy parser</description>

    <properties>
        <java.version>21</java.version>
        <!-- Версия Spring Cloud, совместимая со Spring Boot 3.5.x (обнови при необходимости) -->
        <spring-cloud.version>2025.0.0</spring-cloud.version>
    </properties>

    <!-- BOM для Spring Cloud (нужен для OpenFeign) -->
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring-cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <dependencies>

        <!-- Spring Web MVC -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <!-- WebFlux (для webflux-клиента) -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-webflux</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>
        <!-- JPA + H2 -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>

        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <scope>runtime</scope>
        </dependency>

        <!-- OpenFeign (для межсервисного взаимодействия) -->
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-openfeign</artifactId>
        </dependency>

        <!-- Jsoup для парсинга HTML -->
        <dependency>
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.17.2</version>
        </dependency>

        <!-- (Опционально) Lombok для сокращения бойлерплейта -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>

        <!-- Тесты -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>21</source>
                    <target>21</target>
                    <compilerArgs>--enable-preview</compilerArgs>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project>

================================================================================
FILE: README.md
================================================================================

# Описание проекта и нужные штуки

## Цель задания

Научиться проектировать и реализовывать многопоточное приложение для автоматизированного сбора, обработки и хранения данных из веб-источников с соблюдением

## Вариант 3:

Разработать парсер вакансий, который будет собирать информацию о вакансиях с сайтов (hh.ru, SuperJob, Habr Career и.т.п.)

Пример работы: входная ссылка — страница вакансии. Сервис собирает: название вакансии, компанию зарплату, требования, город, дату размещения. Этот сервис может быть полезен для анализа рынка труда или создания собственного агрегатора.

## Общие требования к проекту:

Вам необходимо реализовать MVC приложение на Spring Boot (достаточно бековой части, фронт можете реализовать по своему желанию).

При проверке итоговый проект должен быть минимально настраиваемым со стороны проверяющего проект преподавателя. Проверяющий должен нажать кнопку пуск и без дополнительных настроек проверить логику проекта.
Логику последовательности действий для проверяющего нужно описать в файле readme.md (например - запустить проект, выполнить POST - запрос на полный URL (указать по примеру http://localhost:8080/post), приложить JSON запроса.

Требования по многопоточности:

    · Использовать кастомный ExecutorService или ForkJoinPool.
    · Добавить запуск по расписанию @Schedule или использовать ScheduledExecutorService.
    · Использовать встроенную базу данных H2. Если не знакомы с JPA - можете использовать просто файлы для хранения информаций
    · Сервис должен запускаться, работать и отдавать результаты через эндпоинт получения результатов, например: /answer. (параметры пагинации и сортировки добавьте по желанию).
    · Добавьте извлечение результатов, возможность сортировки по входным параметрами из H2 через parallelStreamApi.
    · Для межсервисного взаимодействия используйте webflux, resttemplate, feignclient.
    · Используйте потокобезопасные структуры данных.


================================================================================
FILE: .mvn\wrapper\maven-wrapper.properties
================================================================================

# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
wrapperVersion=3.3.2
distributionType=only-script
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.11/apache-maven-3.9.11-bin.zip


================================================================================
FILE: src\main\java\com\shanaurin\jobparser\JobParserApplication.java
================================================================================

package com.shanaurin.jobparser;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.scheduling.annotation.EnableScheduling;

@EnableScheduling
@SpringBootApplication
public class JobParserApplication {

	public static void main(String[] args) {
		SpringApplication.run(JobParserApplication.class, args);
        System.out.println("ok");
		System.out.println(33);
	}

}


================================================================================
FILE: src\main\java\com\shanaurin\jobparser\config\ExecutorConfig.java
================================================================================

package com.shanaurin.jobparser.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.concurrent.*;
import java.util.concurrent.atomic.AtomicInteger;

@Configuration
public class ExecutorConfig {

    @Bean(destroyMethod = "shutdown")
    public ExecutorService vacancyExecutor() {
        return new ThreadPoolExecutor(
                4,
                8,
                60L, TimeUnit.SECONDS,
                new LinkedBlockingQueue<>(),
                new ThreadFactory() {
                    private final AtomicInteger count = new AtomicInteger(1);
                    @Override
                    public Thread newThread(Runnable r) {
                        Thread thread = new Thread(r);
                        thread.setName("vacancy-parser-" + count.getAndIncrement());
                        thread.setDaemon(false);
                        return thread;
                    }
                }
        );
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\config\VacancyConfig.java
================================================================================

package com.shanaurin.jobparser.config;

import org.springframework.context.annotation.Configuration;
import java.util.List;

@Configuration
public class VacancyConfig {

    public static final List<String> VACANCY_TITLES = List.of(
            "Java разработчик",
            "Junior Java разработчик",
            "Middle Java разработчик",
            "Senior Java разработчик",
            "Backend разработчик Java",
            "Fullstack разработчик Java",
            "Разработчик микросервисов Java",
            "Java разработчик корпоративных систем",
            "Инженер-программист Java",
            "Java разработчик интеграционных сервисов",
            "Java разработчик банковских систем",
            "Java разработчик highload систем",
            "Java разработчик REST API",
            "Java разработчик Spring Boot",
            "Java разработчик Kafka",
            "Java разработчик с опытом Docker/Kubernetes",
            "Разработчик Java EE",
            "Разработчик Java SE",
            "Разработчик Java/Spring",
            "Разработчик Java/Hibernate",
            "Java разработчик аналитических систем",
            "Java разработчик систем бронирования",
            "Java разработчик CRM систем",
            "Java разработчик платежных сервисов",
            "Java разработчик в продуктовую команду",
            "Java разработчик в финтех-проект",
            "Java разработчик в e-commerce проект",
            "Java разработчик в стартап",
            "Java разработчик в команду интеграций",
            "Java разработчик в команду данных",
            "Lead Java разработчик",
            "Team Lead Java",
            "Tech Lead Java",
            "Java разработчик тестовых фреймворков",
            "Java разработчик автоматизации процессов",
            "Java разработчик backend-сервисов",
            "Java разработчик клиентских сервисов",
            "Java разработчик внутренних систем",
            "Java разработчик облачных решений",
            "Java разработчик распределенных систем",
            "Инженер по сопровождению Java-приложений",
            "Java разработчик ETL-процессов",
            "Java разработчик отчётности",
            "Java разработчик интеграционной шины",
            "Java разработчик мобильного backend",
            "Java разработчик API шлюзов",
            "Java разработчик внутренних инструментов",
            "Java разработчик для автоматизации тестирования",
            "Java разработчик систем мониторинга",
            "Java разработчик для b2b-платформы"
    );

    public static final List<String> CITIES = List.of(
            "Москва",
            "Санкт-Петербург",
            "Новосибирск",
            "Екатеринбург",
            "Казань",
            "Нижний Новгород",
            "Челябинск",
            "Самара",
            "Ростов-на-Дону",
            "Уфа",
            "Красноярск",
            "Воронеж",
            "Пермь",
            "Волгоград",
            "Краснодар",
            "Омск",
            "Тюмень",
            "Иркутск",
            "Хабаровск",
            "Владивосток"
    );

    public static final List<String> REQUIREMENTS = List.of(
            "Опыт коммерческой разработки на Java от 1 года",
            "Опыт коммерческой разработки на Java от 2 лет",
            "Опыт коммерческой разработки на Java от 3 лет",
            "Глубокие знания Java Core",
            "Уверенное знание коллекций Java",
            "Понимание принципов ООП и SOLID",
            "Опыт разработки на Java 8 и выше",
            "Опыт разработки REST API",
            "Опыт работы с Spring Framework",
            "Опыт работы с Spring Boot",
            "Опыт работы с Spring Data",
            "Опыт работы с Spring Security",
            "Понимание работы IoC и DI в Spring",
            "Опыт написания unit-тестов на JUnit",
            "Опыт написания тестов с использованием Mockito",
            "Опыт работы с системами контроля версий Git",
            "Опыт работы с реляционными базами данных",
            "Знание SQL на уверенном уровне",
            "Опыт работы с PostgreSQL",
            "Опыт работы с MySQL",
            "Опыт работы с Oracle Database",
            "Опыт оптимизации SQL-запросов",
            "Знание принципов транзакций и изоляции",
            "Опыт работы с Hibernate или JPA",
            "Понимание жизненного цикла сущностей JPA",
            "Опыт настройки ORM маппингов",
            "Опыт работы с микросервисной архитектурой",
            "Понимание принципов REST и HTTP",
            "Понимание принципов event-driven архитектуры",
            "Опыт работы с брокерами сообщений (Kafka, RabbitMQ)",
            "Опыт работы с Docker",
            "Опыт работы с Kubernetes или другими оркестраторами",
            "Опыт работы в Linux-среде",
            "Базовые навыки администрирования приложений в Linux",
            "Опыт работы с системами CI/CD (Jenkins, GitLab CI и др.)",
            "Опыт использования Maven или Gradle",
            "Опыт написания многопоточного кода на Java",
            "Понимание проблем синхронизации и конкуренции потоков",
            "Опыт работы с пулом подключений к БД",
            "Опыт профилирования и оптимизации производительности",
            "Умение работать с системами логирования (SLF4J, Logback, Log4j)",
            "Опыт работы с системами мониторинга (Prometheus, Grafana и др.)",
            "Понимание принципов работы распределённых систем",
            "Опыт построения отказоустойчивых решений",
            "Знание шаблонов проектирования",
            "Опыт участия в code review",
            "Навык написания чистого и поддерживаемого кода",
            "Опыт работы по методологиям Agile (Scrum, Kanban)",
            "Опыт оценки задач и планирования спринтов",
            "Умение работать в команде разработчиков",
            "Навыки устной и письменной коммуникации",
            "Готовность принимать участие в архитектурных решениях",
            "Опыт документирования API и технических решений",
            "Опыт работы с OpenAPI/Swagger",
            "Понимание принципов безопасности веб-приложений",
            "Опыт реализации аутентификации и авторизации",
            "Опыт интеграции с внешними системами",
            "Опыт работы с очередями сообщений",
            "Опыт работы с распределённым кэшированием",
            "Опыт работы с Redis или аналогами",
            "Опыт работы с NoSQL базами данных",
            "Понимание принципов CAP-теоремы",
            "Опыт разработки высоконагруженных систем",
            "Опыт работы с системами очередей Kafka",
            "Опыт написания интеграционных тестов",
            "Опыт использования Testcontainers",
            "Опыт работы с GitFlow или аналогичными практиками",
            "Понимание жизненного цикла разработки ПО",
            "Опыт декомпозиции задач",
            "Умение оценивать сроки выполнения задач",
            "Готовность нести ответственность за результат",
            "Способность работать в условиях неопределённости",
            "Желание разбираться в бизнес-требованиях",
            "Готовность изучать новые технологии",
            "Навыки самостоятельного поиска информации",
            "Понимание принципов чистой архитектуры",
            "Опыт реализации DDD-подхода приветствуется",
            "Опыт работы с монолитными и микросервисными системами",
            "Опыт миграции монолита на микросервисы",
            "Понимание принципов тестирования",
            "Навык написания интеграционных и e2e тестов",
            "Опыт написания технической документации",
            "Умение работать с Jira или аналогичными системами",
            "Опыт работы с Confluence или аналогами",
            "Готовность участвовать во встречах с заказчиком",
            "Умение аргументировать технические решения",
            "Способность анализировать и устранять инциденты в продакшене",
            "Опыт работы с системами логирования и трассировки",
            "Опыт работы с ELK-стеком или аналогами",
            "Понимание принципов SLA, SLO, SLI",
            "Опыт настройки алертинга",
            "Навыки проведения нагрузочного тестирования",
            "Знание английского языка на уровне чтения документации",
            "Готовность участвовать в ревью архитектуры",
            "Опыт менторства или наставничества приветствуется",
            "Понимание бизнес-процессов заказчика",
            "Умение предлагать улучшения по продукту",
            "Готовность разбираться в чужом коде",
            "Аккуратность в работе с базами данных",
            "Стремление к автоматизации рутинных операций",
            "Ответственное отношение к качеству кода",
            "Готовность соблюдать кодстайл и стандарты команды",
            "Готовность к длительному сотрудничеству",
            "Готовность к обучению и развитию внутри компании",
            "Интерес к современным подходам в backend-разработке",
            "Интерес к построению высоконагруженных систем",
            "Интерес к финтех- и e-commerce-проектам"
    );

    public static final List<String> COMPANIES = List.of(
            "ООО Ромашка",
            "ООО ТехСофт",
            "ООО Инновации",
            "АО Цифровые Решения",
            "ООО АйТи Системы",
            "ООО ПозитивСофт",
            "ООО Вектор Развития",
            "АО ТехноПлюс",
            "ООО Новый Код",
            "ООО АльфаСофт",
            "ООО БетаТех",
            "ООО ГаммаСофт",
            "ООО ИнфоСистемы",
            "АО CloudTech",
            "ООО ДатаЛаб",
            "ООО DevFactory",
            "ООО Код и Бизнес",
            "ООО IT-Пространство",
            "ООО DigitalLab",
            "ООО Системные Решения"
    );

    public static final List<String> SOURCES = List.of(
            "hh.ru",
            "superjob.ru",
            "rabota.ru",
            "linkedin.com",
            "career.habr.com"
    );
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\config\VacancyGeneratorConfig.java
================================================================================

package com.shanaurin.jobparser.config;

import com.shanaurin.jobparser.model.dto.VacancyDto;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.time.LocalDateTime;
import java.util.List;
import java.util.Random;
import java.util.concurrent.ThreadLocalRandom;

@Configuration
public class VacancyGeneratorConfig {


    private final Random random = new Random();

    @Bean
    public VacancyRandomGenerator vacancyRandomGenerator() {
        return new VacancyRandomGenerator();
    }

    public class VacancyRandomGenerator {

        public VacancyDto generateRandomVacancy(String source, Long id) {
            String sourceValue = "unknown.tld";
            if (VacancyConfig.SOURCES.contains(source)) {
                sourceValue = source;
            }
            String title = randomFrom(VacancyConfig.VACANCY_TITLES);
            String city = randomFrom(VacancyConfig.CITIES);

            String company = randomFrom(VacancyConfig.COMPANIES);

            String salary = randomSalary();

            String requirements = randomRequirements();

            LocalDateTime createdAt = LocalDateTime.now();
            LocalDateTime publishedAt = createdAt.minusDays(random.nextInt(30));

            String url = buildUrl(source, id);

            return new VacancyDto(
                    id,
                    sourceValue,
                    url,
                    title,
                    company,
                    city,
                    salary,
                    requirements,
                    publishedAt,
                    createdAt
            );
        }

        private String randomFrom(List<String> list) {
            return list.get(random.nextInt(list.size()));
        }

        private String randomSalary() {
            // Пример: "от 150 000 до 250 000 руб. на руки"
            int min = 80_000 + random.nextInt(120_000);   // 80k–200k
            int max = min + 20_000 + random.nextInt(100_000); // +20k–120k
            return String.format("от %,d до %,d руб. на руки", min, max)
                    .replace('\u00A0', ' '); // на всякий случай пробелы
        }

        private String randomRequirements() {
            // Выбираем 5–10 случайных требований и собираем в один абзац
            int count = 5 + random.nextInt(6); // 5–10
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < count; i++) {
                String req = randomFrom(VacancyConfig.REQUIREMENTS);
                if (sb.indexOf(req) >= 0) {
                    // простая защита от дублей: пробуем еще раз
                    i--;
                    continue;
                }
                if (i > 0) {
                    sb.append("; ");
                }
                sb.append(req);
            }
            return sb.toString();
        }

        private String buildUrl(String source, Long id) {
            // Очень грубая генерация URL для примера
            String base;
            if (source.contains("hh")) {
                base = "https://hh.ru/vacancy/";
            } else if (source.contains("superjob")) {
                base = "https://www.superjob.ru/vacancy/";
            } else if (source.contains("rabota")) {
                base = "https://www.rabota.ru/vacancy/";
            } else if (source.contains("habr")) {
                base = "https://career.habr.com/vacancies/";
            } else if (source.contains("linkedin")) {
                base = "https://www.linkedin.com/jobs/view/";
            } else {
                base = "https://example.com/vacancy/";
            }
            long randomPart = ThreadLocalRandom.current().nextLong(1_000_000, 9_999_999);
            return base + (id != null ? id : randomPart);
        }
    }
}


================================================================================
FILE: src\main\java\com\shanaurin\jobparser\config\WebClientConfig.java
================================================================================

package com.shanaurin.jobparser.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.reactive.function.client.WebClient;

@Configuration
public class WebClientConfig {
    @Bean
    public WebClient webClient(WebClient.Builder builder) {
        return builder.build();
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\controller\MockHtmlController.java
================================================================================

package com.shanaurin.jobparser.controller;

import com.shanaurin.jobparser.model.dto.VacancyDto;
import com.shanaurin.jobparser.service.MockVacancyCacheService;
import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.*;
import org.thymeleaf.TemplateEngine;
import org.thymeleaf.context.Context;

@RestController
@RequestMapping("/mock")
public class MockHtmlController {

    private final MockVacancyCacheService mockVacancyCacheService;
    private final TemplateEngine templateEngine;

    public MockHtmlController(MockVacancyCacheService mockVacancyCacheService,
                              TemplateEngine templateEngine) {
        this.mockVacancyCacheService = mockVacancyCacheService;
        this.templateEngine = templateEngine;
    }

    @GetMapping(
            value = "/vacancy/{type}/{id}",
            produces = MediaType.TEXT_HTML_VALUE
    )
    public String getMockVacancy(
            @PathVariable("type") String templateType,
            @PathVariable("id") Long id
    ) {
        // 1. Идемпотентно получаем VacancyDto из кэша / генератора
        VacancyDto vacancy = mockVacancyCacheService.getOrCreate(templateType, id);

        // 2. Готовим контекст Thymeleaf
        Context ctx = new Context();
        ctx.setVariable("id", vacancy.getId());
        ctx.setVariable("source", vacancy.getSource());
        ctx.setVariable("title", vacancy.getTitle());
        ctx.setVariable("salary", vacancy.getSalary());
        ctx.setVariable("company", vacancy.getCompany());
        ctx.setVariable("city", vacancy.getCity());
        ctx.setVariable("url", vacancy.getUrl());
        ctx.setVariable("publishedAt", vacancy.getPublishedAt());
        ctx.setVariable("createdAt", vacancy.getCreatedAt());
        ctx.setVariable("requirements", vacancy.getRequirements());

        // 3. Рендерим HTML из шаблона на диске
        return templateEngine.process("vacancy-mock", ctx);
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\controller\PageController.java
================================================================================

package com.shanaurin.jobparser.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class PageController {

    @GetMapping("/")
    public String index() {
        return "index";
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\controller\ParseController.java
================================================================================

package com.shanaurin.jobparser.controller;

import com.shanaurin.jobparser.model.dto.ParseRequest;
import com.shanaurin.jobparser.service.UrlQueueService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api")
public class ParseController {

    private final UrlQueueService urlQueueService;

    public ParseController(UrlQueueService urlQueueService) {
        this.urlQueueService = urlQueueService;
    }

    @PostMapping("/parse")
    public ResponseEntity<String> parse(@RequestBody ParseRequest request) {
        urlQueueService.addAll(request.getUrls());
        return ResponseEntity.accepted().body("URLs added to queue");
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\controller\VacancyController.java
================================================================================

package com.shanaurin.jobparser.controller;

import com.shanaurin.jobparser.model.dto.VacancyDto;
import com.shanaurin.jobparser.service.VacancyService;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

// controller/VacancyController.java
@RestController
@RequestMapping("/api/vacancies")
public class VacancyController {

    private final VacancyService vacancyService;

    public VacancyController(VacancyService vacancyService) {
        this.vacancyService = vacancyService;
    }

    @GetMapping
    public List<VacancyDto> getVacancies(
            @RequestParam(required = false) String city,
            @RequestParam(required = false) String company,
            @RequestParam(defaultValue = "createdAt") String sortBy,
            @RequestParam(defaultValue = "ASC") String direction,
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "20") int size
    ) {
        return vacancyService.getVacancies(city, company, sortBy, direction, page, size);
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\logging\LoggingDaemon.java
================================================================================

package com.shanaurin.jobparser.logging;

import org.springframework.stereotype.Component;

import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

@Component
public class LoggingDaemon {

    private final BlockingQueue<String> logQueue = new LinkedBlockingQueue<>();

    public LoggingDaemon() {
        Thread daemon = new Thread(this::processLogs);
        daemon.setDaemon(true);
        daemon.setName("logging-daemon");
        daemon.start();
    }

    public void log(String message) {
        logQueue.offer(message);
    }

    private void processLogs() {
        while (true) {
            try {
                String msg = logQueue.take();
                // писать в файл или системный лог
                System.out.println("[ASYNC LOG] " + msg);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
                break;
            }
        }
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\model\Vacancy.java
================================================================================

package com.shanaurin.jobparser.model;

import jakarta.persistence.*;
import java.time.LocalDateTime;

import lombok.Getter;
import lombok.Setter;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;
import lombok.Builder;

@Entity
@Table(name = "vacancies")
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Vacancy {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String source;
    private String url;
    private String title;
    private String company;
    private String city;
    private String salary;

    @Column(length = 2000)
    private String requirements;

    private LocalDateTime publishedAt;
    private LocalDateTime createdAt;
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\model\dto\ParseRequest.java
================================================================================

package com.shanaurin.jobparser.model.dto;

import java.util.List;

import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class ParseRequest {
    private List<String> urls;
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\model\dto\VacancyDto.java
================================================================================

package com.shanaurin.jobparser.model.dto;

import java.time.LocalDateTime;

import lombok.Getter;
import lombok.Setter;
import lombok.AllArgsConstructor;
import lombok.NoArgsConstructor;

@Getter
@Setter
@AllArgsConstructor
@NoArgsConstructor
public class VacancyDto {
    private Long id;
    private String source;
    private String url;
    private String title;
    private String company;
    private String city;
    private String salary;
    private String requirements;
    private LocalDateTime publishedAt;
    private LocalDateTime createdAt;
}


================================================================================
FILE: src\main\java\com\shanaurin\jobparser\repository\VacancyRepository.java
================================================================================

package com.shanaurin.jobparser.repository;

import com.shanaurin.jobparser.model.Vacancy;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.List;

// repository/VacancyRepository.java
public interface VacancyRepository extends JpaRepository<Vacancy, Long> {

    List<Vacancy> findByCityIgnoreCase(String city);

    List<Vacancy> findByCompanyIgnoreCase(String company);
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\MockVacancyCacheService.java
================================================================================

package com.shanaurin.jobparser.service;

import com.shanaurin.jobparser.config.VacancyGeneratorConfig.VacancyRandomGenerator;
import com.shanaurin.jobparser.model.dto.VacancyDto;
import org.springframework.stereotype.Service;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

@Service
public class MockVacancyCacheService {

    private final VacancyRandomGenerator vacancyRandomGenerator;

    // key = type + ":" + id
    private final Map<String, VacancyDto> cache = new ConcurrentHashMap<>();

    public MockVacancyCacheService(VacancyRandomGenerator vacancyRandomGenerator) {
        this.vacancyRandomGenerator = vacancyRandomGenerator;
    }

    public VacancyDto getOrCreate(String type, Long id) {
        String key = STR."\{type}:\{id}";
        return cache.computeIfAbsent(key, k -> vacancyRandomGenerator.generateRandomVacancy(type, id));
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\ParseService.java
================================================================================

package com.shanaurin.jobparser.service;

import com.shanaurin.jobparser.logging.LoggingDaemon;
import com.shanaurin.jobparser.model.Vacancy;
import com.shanaurin.jobparser.repository.VacancyRepository;
import com.shanaurin.jobparser.service.client.WebFluxMockHtmlClient;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.concurrent.ExecutorService;

@Service
public class ParseService {

    private final ExecutorService vacancyExecutor;
    private final WebFluxMockHtmlClient mockHtmlClient;
    private final VacancyParser vacancyParser;
    private final VacancyRepository vacancyRepository;
    private final LoggingDaemon loggingDaemon;

    public ParseService(ExecutorService vacancyExecutor,
                        WebFluxMockHtmlClient mockHtmlClient,
                        VacancyParser vacancyParser,
                        VacancyRepository vacancyRepository,
                        LoggingDaemon loggingDaemon) {
        this.vacancyExecutor = vacancyExecutor;
        this.mockHtmlClient = mockHtmlClient;
        this.vacancyParser = vacancyParser;
        this.vacancyRepository = vacancyRepository;
        this.loggingDaemon = loggingDaemon;
    }

    public void parseUrls(List<String> urls) {
        for (String url : urls) {
            vacancyExecutor.submit(() -> processUrl(url));
        }
    }

    private void processUrl(String url) {
        try {
            String html = mockHtmlClient.fetchHtml(url);
            Vacancy vacancy = vacancyParser.parse(html, url);
            vacancyRepository.save(vacancy);
            loggingDaemon.log("Saved vacancy from: " + url);
        } catch (Exception e) {
            loggingDaemon.log("Error processing url " + url + ": " + e.getMessage());
        }
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\UrlQueueService.java
================================================================================

package com.shanaurin.jobparser.service;

import org.springframework.stereotype.Service;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

@Service
public class UrlQueueService {

    private final BlockingQueue<String> urlQueue = new LinkedBlockingQueue<>();

    public void addAll(List<String> urls) {
        if (urls == null || urls.isEmpty()) {
            return;
        }
        urlQueue.addAll(urls);
    }

    /**
     * Забирает до maxCount урлов из очереди (не блокируясь, если их меньше).
     */
    public List<String> pollBatch(int maxCount) {
        List<String> result = new ArrayList<>(maxCount);
        urlQueue.drainTo(result, maxCount);
        return result;
    }

    public int size() {
        return urlQueue.size();
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\VacancyParser.java
================================================================================

package com.shanaurin.jobparser.service;

import com.shanaurin.jobparser.model.Vacancy;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.springframework.stereotype.Service;

import java.time.LocalDateTime;
import java.time.format.DateTimeParseException;

@Service
public class VacancyParser {

    public Vacancy parse(String html, String originalUrl) {
        Document doc = Jsoup.parse(html);

        String title        = textOrNull(doc.selectFirst("h1.title"));
        String salary       = textOrNull(doc.selectFirst("div.salary"));
        String company      = textOrNull(selectMetaValueAfterLabel(doc, "Компания:"));
        String city         = textOrNull(selectMetaValueAfterLabel(doc, "Город:"));
        String sourceBadge  = textOrNull(doc.selectFirst(".badge"));

        // ссылка-источник: <a class="link" ... th:href="${url}" th:text="${url}">
        Element urlEl = doc.selectFirst("a.link");
        String vacancyUrl = urlEl != null ? urlEl.attr("href") : null;
        if (vacancyUrl == null || vacancyUrl.isBlank()) {
            // на всякий случай используем текст внутри ссылки
            vacancyUrl = textOrNull(urlEl);
        }

        // даты: "Опубликовано:" и "Загружено в систему:"
        String publishedAtStr = textOrNull(selectMetaValueAfterLabel(doc, "Опубликовано:"));
        String createdAtStr   = textOrNull(selectMetaValueAfterLabel(doc, "Загружено в систему:"));

        LocalDateTime publishedAt = parseDateTimeSafe(publishedAtStr);
        LocalDateTime createdAt   = parseDateTimeSafe(createdAtStr);
        if (createdAt == null) {
            createdAt = LocalDateTime.now();
        }

        // блок требований: <div class="requirements" th:text="${requirements}">
        String requirements = textOrNull(doc.selectFirst("div.requirements"));

        Vacancy v = new Vacancy();
        v.setTitle(title);
        v.setCompany(company);
        v.setCity(city);
        v.setSalary(salary);
        v.setRequirements(requirements);
        v.setPublishedAt(publishedAt);
        v.setCreatedAt(createdAt);

        // URL, который реально парсили (endpoint мок‑страницы)
        v.setUrl(originalUrl);

        // source: лучше всего брать из бэйджа (там, где th:text="${source}")
        v.setSource(sourceBadge != null ? sourceBadge : determineSourceFromUrl(originalUrl));

        return v;
    }

    /**
     * Ищет в блоках .meta такое:
     *
     * <div class="meta">
     *   <span class="label">Компания:</span>
     *   <span>ООО Ромашка</span>
     * </div>
     *
     * И возвращает текст второго span.
     */
    private Element selectMetaValueAfterLabel(Document doc, String labelText) {
        for (Element meta : doc.select("div.meta")) {
            Element label = meta.selectFirst("span.label");
            if (label != null && label.text().trim().equalsIgnoreCase(labelText)) {
                // берём первый span после label
                for (Element span : meta.select("span")) {
                    if (!span.hasClass("label")) {
                        return span;
                    }
                }
            }
        }
        return null;
    }

    private String textOrNull(Element el) {
        return el != null ? el.text().trim() : null;
    }

    private LocalDateTime parseDateTimeSafe(String text) {
        if (text == null || text.isBlank()) {
            return null;
        }
        try {
            // в шаблоне пример: 2024-10-01T10:15
            return LocalDateTime.parse(text.trim());
        } catch (DateTimeParseException e) {
            return null;
        }
    }

    private String determineSourceFromUrl(String url) {
        if (url == null) return "unknown";
        String lower = url.toLowerCase();
        if (lower.contains("hh")) return "hh.ru";
        if (lower.contains("superjob")) return "superjob.ru";
        if (lower.contains("habr")) return "career.habr.com";
        if (lower.contains("rabota")) return "rabota.ru";
        if (lower.contains("linkedin")) return "linkedin.com";
        return "unknown";
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\VacancyService.java
================================================================================

package com.shanaurin.jobparser.service;

import com.shanaurin.jobparser.model.Vacancy;
import com.shanaurin.jobparser.model.dto.VacancyDto;
import com.shanaurin.jobparser.repository.VacancyRepository;
import org.springframework.stereotype.Service;

import java.util.Comparator;
import java.util.List;
import java.time.LocalDateTime;

// service/VacancyService.java
@Service
public class VacancyService {

    private final VacancyRepository vacancyRepository;

    public VacancyService(VacancyRepository vacancyRepository) {
        this.vacancyRepository = vacancyRepository;
    }

    public List<VacancyDto> getVacancies(
            String city,
            String company,
            String sortBy,
            String direction,
            int page,
            int size
    ) {
        List<Vacancy> all = vacancyRepository.findAll();

        Comparator<Vacancy> comparator = getComparator(sortBy, direction);

        return all.parallelStream()
                .filter(v -> city == null || v.getCity().equalsIgnoreCase(city))
                .filter(v -> company == null || v.getCompany().equalsIgnoreCase(company))
                .sorted(comparator)
                .skip((long) page * size)
                .limit(size)
                .map(this::toDto)
                .toList();
    }

    private Comparator<Vacancy> getComparator(String sortBy, String direction) {
        Comparator<Vacancy> comp;
        switch (sortBy) {
            case "salary" -> comp = Comparator.comparing(Vacancy::getSalary, Comparator.nullsLast(String::compareTo));
            case "publishedAt" -> comp = Comparator.comparing(Vacancy::getPublishedAt, Comparator.nullsLast(LocalDateTime::compareTo));
            default -> comp = Comparator.comparing(Vacancy::getCreatedAt, Comparator.nullsLast(LocalDateTime::compareTo));
        }
        if ("DESC".equalsIgnoreCase(direction)) {
            comp = comp.reversed();
        }
        return comp;
    }

    private VacancyDto toDto(Vacancy v) {
        VacancyDto dto = new VacancyDto();
        dto.setId(v.getId());
        dto.setSource(v.getSource());
        dto.setUrl(v.getUrl());
        dto.setTitle(v.getTitle());
        dto.setCompany(v.getCompany());
        dto.setCity(v.getCity());
        dto.setSalary(v.getSalary());
        dto.setRequirements(v.getRequirements());
        dto.setPublishedAt(v.getPublishedAt());
        dto.setCreatedAt(v.getCreatedAt());
        return dto;
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\client\WebFluxMockHtmlClient.java
================================================================================

package com.shanaurin.jobparser.service.client;

import org.springframework.stereotype.Service;
import org.springframework.web.reactive.function.client.WebClient;

@Service
public class WebFluxMockHtmlClient {

    private final WebClient webClient;

    public WebFluxMockHtmlClient(WebClient webClient) {
        this.webClient = webClient;
    }

    public String fetchHtml(String url) {
        return webClient.get()
                .uri(url)
                .retrieve()
                .bodyToMono(String.class)
                .block(); // для примера, блокируем
    }
}

================================================================================
FILE: src\main\java\com\shanaurin\jobparser\service\scheduler\VacancyScheduler.java
================================================================================

package com.shanaurin.jobparser.service.scheduler;

import com.shanaurin.jobparser.service.ParseService;
import com.shanaurin.jobparser.service.UrlQueueService;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class VacancyScheduler {

    private final ParseService parseService;
    private final UrlQueueService urlQueueService;

    public VacancyScheduler(ParseService parseService,
                            UrlQueueService urlQueueService) {
        this.parseService = parseService;
        this.urlQueueService = urlQueueService;
    }

    // Раз в 5 секунд (пример)
    @Scheduled(fixedRateString = "${scheduler.vacancy.fixed-rate-ms:5000}")
    public void scheduledParsing() {
        // забираем пачку урлов, например, до 50 штук
        List<String> urls = urlQueueService.pollBatch(50);
        if (urls.isEmpty()) {
            return;
        }
        parseService.parseUrls(urls);
    }
}

================================================================================
FILE: src\main\resources\application.properties
================================================================================

spring.application.name=vacancy-parser

# --- H2 + JPA ---

spring.datasource.url=jdbc:h2:mem:job-parser-db
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

spring.jpa.hibernate.ddl-auto=update
# ????:
# spring.jpa.hibernate.ddl-auto=none

spring.jpa.show-sql=true

spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.data-locations=classpath:data.sql

# --- ??????? H2 ---

spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# --- Web server ---

server.port=8080

# logging.level.org.springframework.web.reactive=DEBUG
# logging.level.reactor.netty=DEBUG

feign.compression.request.enabled=true
feign.compression.response.enabled=true
logging.level.org.springframework.cloud.openfeign=INFO

scheduler.vacancy.fixed-rate-ms=60000

================================================================================
FILE: src\main\resources\templates\index.html
================================================================================

<!-- src/main/resources/templates/index.html -->
<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Вакансии – демо</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }

        .page {
            max-width: 960px;
            margin: 0 auto;
            padding: 24px 16px 48px;
        }

        .card {
            background: #fff;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 16px;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            font-family: monospace;
            font-size: 13px;
            padding: 8px;
            box-sizing: border-box;
        }

        button {
            margin: 8px 8px 8px 0;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            background: #2b7cff;
            color: #fff;
        }

        button.secondary {
            background: #666;
        }

        button:disabled {
            background: #ccc;
            cursor: default;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            margin-top: 16px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 6px 8px;
        }

        th {
            background: #f0f0f0;
        }

        .status {
            font-size: 13px;
            color: #555;
            margin-top: 8px;
        }
    </style>
</head>

<body>
    <div class="page">
        <div class="card">
            <h2>Генерация URL для мок‑вакансий</h2>
            <p>Здесь можно сгенерировать 20 URL вида <code>/mock/vacancy/{source}/{id}</code> и отправить их на парсинг.
            </p>

            <textarea id="urlsTextarea"></textarea>

            <div>
                <button id="generateBtn" type="button">Сгенерировать 20 URL</button>
                <button id="sendBtn" type="button">Отправить на парсинг</button>
            </div>
            <div class="status" id="parseStatus"></div>
        </div>

        <div class="card">
            <h2>Просмотр вакансий из H2 </h2>
            <div><a href="/h2-console">Ссылка на H2 консоль</a></div>

            <!-- Блок фильтров -->
            <div style="margin-top: 12px; margin-bottom: 8px;">
                <label>
                    Город:
                    <input id="filterCity" type="text" placeholder="Москва" style="margin-right: 8px;">
                </label>
                <label>
                    Компания:
                    <input id="filterCompany" type="text" placeholder="Яндекс">
                </label>
            </div>

            <div>
                <button id="loadVacanciesBtn" type="button" class="secondary">Загрузить вакансии</button>
            </div>
            <div class="status" id="vacancyStatus"></div>
            <div id="vacancyTableWrapper"></div>
        </div>
    </div>

    <script>
        // Список источников должен совпадать с VacancyConfig.SOURCES
        const SOURCES = ["hh.ru", "superjob.ru", "rabota.ru", "linkedin.com", "career.habr.com"];

        function generateUrls(count = 20) {
            const urls = [];
            const { origin } = window.location; // протокол + хост + порт, например: https://example.com
            for (let i = 0; i < count; i++) {
                const source = SOURCES[Math.floor(Math.random() * SOURCES.length)];
                const id = 1 + Math.floor(Math.random() * 100000);

                urls.push(`${origin}/mock/vacancy/${source}/${id}`);
            }
            document.getElementById('urlsTextarea').value = urls.join('\n');
        }

        async function sendToParse() {
            const textarea = document.getElementById('urlsTextarea');
            const statusEl = document.getElementById('parseStatus');
            const raw = textarea.value.trim();
            if (!raw) {
                statusEl.textContent = "Поле пустое, нечего отправлять.";
                return;
            }
            const urls = raw.split(/\r?\n/).map(s => s.trim()).filter(Boolean);
            const body = { urls: urls };

            statusEl.textContent = "Отправка...";
            try {
                const resp = await fetch('/api/parse', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(body)
                });
                const text = await resp.text();
                statusEl.textContent = `Ответ сервера: ${resp.status} ${resp.statusText} – ${text}`;
            } catch (e) {
                statusEl.textContent = "Ошибка при отправке: " + e.message;
            }
        }

        async function loadVacancies() {
            const statusEl = document.getElementById('vacancyStatus');
            const wrapper = document.getElementById('vacancyTableWrapper');
            const city = document.getElementById('filterCity').value.trim();
            const company = document.getElementById('filterCompany').value.trim();

            statusEl.textContent = "Загрузка...";
            wrapper.innerHTML = "";

            try {
                const params = new URLSearchParams();
                if (city) params.append('city', city);
                if (company) params.append('company', company);

                const query = params.toString();
                const url = query ? `/api/vacancies?${query}` : '/api/vacancies';

                const resp = await fetch(url);
                if (!resp.ok) {
                    statusEl.textContent = `Ошибка: ${resp.status} ${resp.statusText}`;
                    return;
                }
                const data = await resp.json();
                statusEl.textContent = `Загружено записей: ${data.length}`;

                if (!data.length) {
                    wrapper.textContent = "Нет данных.";
                    return;
                }

                const table = document.createElement('table');
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                ['ID', 'Название', 'Компания', 'Город', 'Зарплата', 'Дата публикации'].forEach(h => {
                    const th = document.createElement('th');
                    th.textContent = h;
                    headerRow.appendChild(th);
                });
                thead.appendChild(headerRow);
                table.appendChild(thead);

                const tbody = document.createElement('tbody');
                data.forEach(v => {
                    const tr = document.createElement('tr');
                    const cells = [
                        v.id,
                        v.title,
                        v.company,
                        v.city,
                        v.salary,
                        v.publishedAt
                    ];
                    cells.forEach(val => {
                        const td = document.createElement('td');
                        td.textContent = val !== null && val !== undefined ? val : '';
                        tr.appendChild(td);
                    });
                    tbody.appendChild(tr);
                });
                table.appendChild(tbody);
                wrapper.appendChild(table);
            } catch (e) {
                statusEl.textContent = "Ошибка при загрузке: " + e.message;
            }
        }

        document.getElementById('generateBtn').addEventListener('click', generateUrls);
        document.getElementById('sendBtn').addEventListener('click', sendToParse);
        document.getElementById('loadVacanciesBtn').addEventListener('click', loadVacancies);

        // при первом открытии сразу сгенерируем 20 URL
        generateUrls();
    </script>
</body>

</html>

================================================================================
FILE: src\main\resources\templates\vacancy-mock.html
================================================================================

<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${title} + ' – вакансия'">Вакансия</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
        .page { max-width: 960px; margin: 0 auto; padding: 24px 16px 48px; }
        .card { background: #fff; border-radius: 8px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 16px; }
        .title { font-size: 24px; font-weight: 700; margin: 0 0 8px; }
        .salary { font-size: 18px; font-weight: 600; color: #008000; margin-bottom: 12px; }
        .meta { font-size: 14px; color: #666; margin-bottom: 4px; }
        .label { font-weight: 600; }
        .section-title { font-size: 18px; font-weight: 600; margin: 24px 0 8px; }
        .requirements { white-space: pre-wrap; line-height: 1.5; font-size: 14px; }
        .link { color: #2b7cff; text-decoration: none; }
        .link:hover { text-decoration: underline; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 20px; font-size: 12px; background: #eef2ff; color: #3b4cca; margin-left: 8px; }
        .footer { font-size: 12px; color: #999; margin-top: 24px; }
    </style>
</head>
<body>
<div class="page">

    <div class="card">
        <div class="meta">
            ID: <span th:text="${id}">1</span>
            <span class="badge" th:text="${source}">hh.ru</span>
        </div>

        <h1 class="title" th:text="${title}">Java Developer</h1>

        <div class="salary" th:text="${salary}">от 150 000 до 250 000 руб. на руки</div>

        <div class="meta">
            <span class="label">Компания:</span>
            <span th:text="${company}">ООО Ромашка</span>
        </div>

        <div class="meta">
            <span class="label">Город:</span>
            <span th:text="${city}">Москва</span>
        </div>

        <div class="meta">
            <span class="label">Источник:</span>
            <a class="link"
               th:href="${url}"
               th:text="${url}"
               target="_blank"
               rel="noopener noreferrer">
                https://example.com/vacancy/123
            </a>
        </div>

        <div class="meta">
            <span class="label">Опубликовано:</span>
            <span th:text="${publishedAt}">2024-10-01T10:15</span>
        </div>

        <div class="meta">
            <span class="label">Загружено в систему:</span>
            <span th:text="${createdAt}">2024-10-02T12:00</span>
        </div>

        <h2 class="section-title">Описание / требования</h2>
        <div class="requirements" th:text="${requirements}">
            Требования...
        </div>
    </div>

    <div class="footer">
        Мокап вакансии на основе данных из VacancyDto.
    </div>
</div>
</body>
</html>

================================================================================
FILE: src\test\java\com\example\demo\DemoApplicationTests.java
================================================================================

package com.example.demo;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class DemoApplicationTests {

	@Test
	void contextLoads() {
	}

}


